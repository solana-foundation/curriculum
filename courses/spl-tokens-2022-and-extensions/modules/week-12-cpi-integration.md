# Week 12: Cross-Program Invocations with Token-2022

## Learning Objectives

- Master CPI patterns for Token-2022 operations
- Handle account size calculations in CPIs
- Implement complex program interactions
- Build composable token protocols

## Topics Covered

- CPI differences between Token and Token-2022
- Account size requirements for extensions
- PDA derivation with Token-2022
- Instruction building for extended operations
- Error handling in cross-program calls
- Compute unit optimization for CPIs

## Hands-on Exercises

1. **Token Vault Program**: Build program that holds Token-2022
2. **DEX Integration**: Create swap program for extended tokens
3. **Staking Program**: Implement staking with transfer hooks

## Reading Assignment

- CPI documentation for Token-2022
- Anchor CPI examples with extensions
- Program composability best practices
- Security considerations for CPIs

## Homework

- Build a DeFi protocol supporting Token-2022:
  - Lending/borrowing with interest-bearing tokens
  - Liquidity pools for fee-on-transfer tokens
  - Staking with non-transferable rewards
  - Governance with pausable tokens
  - Flash loan support
  - Oracle integration
- Implement comprehensive CPI testing
- Create integration documentation
- Benchmark compute usage
- Build SDK for protocol interaction
